{"version":3,"sources":["webpack:///./src/views/singer/Singer.vue","webpack:///./src/components-block/singer/singer-list.vue","webpack:///./src/components-block/singer/use-scroll.js","webpack:///./src/components-block/singer/singer-list.vue?1a1a","webpack:///./src/views/singer/Singer.vue?bde1","webpack:///./src/components-block/user/user-list.vue?4a50","webpack:///./src/components-block/user/user-list.vue","webpack:///./src/components-block/user/user-list.vue?cedd","webpack:///./src/components-block/singer/singer-list.vue?27a0"],"names":["list","categoryData","onSelectItem","isLoading","class","ref","probe-type","onScroll","item","key","anchor","singers","isShowBottomBox","length","onTouchStart","onTouchMove","onTouchEnd","index","currentIndex","props","normalAnchors","fixedAnchor","anchorTopArr","rightAnchors","rightAnchorTopArr","scrollRef","singerRightWrap","isTouch","watch","nextTick","value","$el","Array","from","document","querySelectorAll","clientHeight","querySelector","map","el","offsetTop","getBoundingClientRect","y","i","currentTop","style","display","title","innerText","innerHTML","e","touches","pageY","targetTAnchor","find","bsRef","scrollTo","setTimeout","name","components","MiniPlayerBox","UserList","Scroll","emits","setup","emit","id","__exports__","SingerList","router","data","push","params","type","render","picUrl","singer","default","Boolean"],"mappings":"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","file":"js/chunk-20bd2787.cc6b5a90.js","sourcesContent":["<template>\n  <div>\n    <singer-list :list='categoryData' @select='onSelectItem' v-load='isLoading'></singer-list>\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport { computed, ref, watchEffect } from 'vue'\nimport { getSingerCategory } from '@/api'\nimport SingerList from '@/components-block/singer/singer-list'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'Singer',\n  components: {\n    SingerList\n  },\n  setup() {\n    const router = useRouter()\n    const categoryData = ref([])\n    watchEffect(async () => {\n      const data = await getSingerCategory()\n      categoryData.value = data\n    })\n    const isLoading = computed(() => categoryData.value.length === 0)\n    //\n    const onSelectItem = (id) => {\n      router.push({\n        name: 'singer-detail',\n        params: {\n          id,\n          type: 'singer'\n        }\n      })\n    }\n    return {\n      categoryData,\n      onSelectItem,\n      isLoading\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n  <div class='singer-scroll'>\n    <scroll class='singer-scroll' ref='scrollRef' probe-type='3' @scroll='onScroll'>\n      <div class='singer-list-wrap'>\n        <div class='singer-item' v-for='item in list' :key='item.anchor'>\n          <div class='singer-anchor-wrap'>\n            <div class='singer-anchor container'>{{ item.anchor }}</div>\n          </div>\n          <div class='container'>\n            <user-list :list='item.singers' @select='onSelectItem' :isShowBottomBox='false'></user-list>\n          </div>\n        </div>\n      </div>\n      <mini-player-box></mini-player-box>\n    </scroll>\n    <div class='singer-right' v-if='list.length!==0' ref='singerRightWrap' @touchstart='onTouchStart'\n         @touchmove='onTouchMove'\n         @touchend='onTouchEnd'>\n      <div class='singer-right-anchor' :class='{active:currentIndex===index}' v-for='(item,index) in list'\n           :key='item.anchor'>{{ item.anchor }}\n      </div>\n    </div>\n    <div class='singer-flex-anchor  container' v-if='list.length!==0' >热</div>\n  </div>\n</template>\n\n<script>\nimport UserList from '@/components-block/user/user-list'\nimport Scroll from '@/components/scroll/scroll'\nimport MiniPlayerBox from '@/components/mini-player-box/mini-player-box'\nimport userScroll from './use-scroll'\n\nexport default {\n  name: 'singer-list',\n  components: {\n    MiniPlayerBox,\n    UserList,\n    Scroll\n  },\n  props: ['list'],\n  emits: ['select'],\n  setup(props, { emit }) {\n    const onSelectItem = (id) => {\n      emit('select', id)\n    }\n    // scroll\n    const {\n      scrollRef,\n      singerRightWrap,\n      onScroll,\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd,\n      currentIndex\n    } = userScroll(props)\n    return {\n      onSelectItem,\n      scrollRef,\n      onScroll,\n      singerRightWrap,\n      onTouchStart,\n      onTouchMove,\n      onTouchEnd,\n      currentIndex\n    }\n  }\n}\n</script>\n\n<style scoped lang='scss'>\n.singer-scroll {\n  width: 100%;\n  position: fixed;\n  left: 0;\n  top: 176px;\n  bottom: 0;\n  overflow: hidden;\n}\n\n.singer-list-wrap {\n  .singer-item {\n    width: 750px;\n\n    .singer-anchor-wrap {\n      width: 750px;\n      height: 60px;\n    }\n\n    .singer-anchor {\n      width: 750px;\n      height: 60px;\n      background: #000;\n      display: flex;\n      align-items: center;\n      background: #44515A;\n      color: #BDBDBD;\n    }\n  }\n}\n\n.singer-flex-anchor {\n  width: 750px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  background: #44515A;\n  color: #BDBDBD;\n  position: fixed;\n  top: 176px;\n  left: 0;\n  z-index: 100;\n}\n\n.singer-right {\n  position: fixed;\n  right: 16px;\n  top: 50%;\n  transform: translate3d(0, -50%, 0);\n  width: 40px;\n  background: rgba(#000000, 50%);\n  z-index: 300;\n  border-radius: 20px;\n  padding: 15px 0;\n\n  .singer-right-anchor {\n    width: 40px;\n    height: 34px;\n    font-size: $font-size-small;\n    color: $color-sub;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    &.active {\n      color: $color-main;\n    }\n  }\n}\n</style>\n","import { nextTick, ref, watch } from 'vue'\n\nexport default function(props) {\n  const scrollRef = ref(null)\n  const singerRightWrap = ref(null)\n  const currentIndex = ref(0)\n  let isTouch = false //touch操作的时候 不要触发onScroll事件\n  let scrollEl, normalAnchors, fixedAnchor, anchorTopArr, anchorHeight, rightAnchorWrap, rightAnchors, rightAnchorTopArr\n  // init El\n  watch(() => props.list, async () => {\n    await nextTick()\n    scrollEl = scrollRef.value.$el\n    normalAnchors = Array.from(document.querySelectorAll('.singer-anchor'))\n    anchorHeight = normalAnchors[0].clientHeight\n    fixedAnchor = document.querySelector('.singer-flex-anchor')\n    rightAnchorWrap = singerRightWrap.value\n    rightAnchors = Array.from(document.querySelectorAll('.singer-right-anchor'))\n    anchorTopArr = normalAnchors.map(el => {\n      return el.offsetTop\n    })\n    rightAnchorTopArr = rightAnchors.map(el => {\n      return el.getBoundingClientRect().y\n    })\n  })\n  //\n  const onScroll = ({ y }) => {\n    if (isTouch) return\n    let index = 0\n    for (let i = 0; i < anchorTopArr.length; i++) {\n      const currentTop = anchorTopArr[i]\n      if (-currentTop >= y) {\n        index = i\n      } else {\n        normalAnchors[i].style.display = 'flex'\n      }\n    }\n    currentIndex.value = index\n\n    const anchor = normalAnchors[currentIndex.value]\n    const title = anchor.innerText\n    fixedAnchor.innerHTML = title\n    anchor.style.display = 'none'\n  }\n  const onTouchStart = (e) => {\n    isTouch = true\n    const y = e.touches[0].pageY\n    let index = 0\n    for (let i = 0; i < rightAnchorTopArr.length; i++) {\n      const currentTop = rightAnchorTopArr[i]\n      if (currentTop <= y) {\n        index = i\n      }\n    }\n    currentIndex.value = index\n    const anchor = rightAnchors[currentIndex.value]\n    const title = anchor.innerText\n    fixedAnchor.innerHTML = title\n    const targetTAnchor = normalAnchors.find(el => {\n      return el.innerText === title\n    })\n    scrollRef.value.bsRef.scrollTo(0, -targetTAnchor.offsetTop, 200)\n  }\n  const onTouchMove = (e) => {\n    isTouch = true\n    const y = e.touches[0].pageY\n    let index = 0\n    for (let i = 0; i < rightAnchorTopArr.length; i++) {\n      const currentTop = rightAnchorTopArr[i]\n      if (currentTop <= y) {\n        index = i\n      }\n    }\n    currentIndex.value = index\n    const anchor = rightAnchors[currentIndex.value]\n    const title = anchor.innerText\n    fixedAnchor.innerHTML = title\n    const targetTAnchor = normalAnchors.find(el => {\n      return el.innerText === title\n    })\n    scrollRef.value.bsRef.scrollTo(0, -targetTAnchor.offsetTop, 200)\n  }\n  const onTouchEnd = (e) => {\n    setTimeout(() => {\n      isTouch = false\n    }, 200)\n  }\n  return {\n    scrollRef,\n    onScroll,\n    singerRightWrap,\n    onTouchStart,\n    onTouchMove,\n    onTouchEnd,\n    currentIndex\n  }\n}\n","import { render } from \"./singer-list.vue?vue&type=template&id=c2f63e58&scoped=true\"\nimport script from \"./singer-list.vue?vue&type=script&lang=js\"\nexport * from \"./singer-list.vue?vue&type=script&lang=js\"\n\nimport \"./singer-list.vue?vue&type=style&index=0&id=c2f63e58&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/nmy/code/vue3-music/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c2f63e58\"]])\n\nexport default __exports__","import { render } from \"./Singer.vue?vue&type=template&id=b2d9d14e\"\nimport script from \"./Singer.vue?vue&type=script&lang=js\"\nexport * from \"./Singer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/nmy/code/vue3-music/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./user-list.vue?vue&type=style&index=0&id=3c32307a&scoped=true&lang=scss\"","<template>\n  <ul class='user-list-wrap'>\n    <li class='item' v-for='item in list' :key='item' @click='onSelectItem(item.id)'>\n      <div class='pic'>\n        <img v-if='item.picUrl' v-lazy='item.picUrl'>\n      </div>\n      <div class='desc'>\n        <h4 class='name'>{{ item.name }}</h4>\n        <h4 class='singer'>{{ item.singer }}</h4>\n      </div>\n    </li>\n    <mini-player-box v-if='isShowBottomBox'></mini-player-box>\n  </ul>\n</template>\n\n<script>\n\nimport MiniPlayerBox from '@/components/mini-player-box/mini-player-box'\n\nexport default {\n  name: 'user-list',\n  components: { MiniPlayerBox },\n  props: {\n    list: {\n      type: Array,\n      default: () => ([])\n    },\n    isShowBottomBox: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, { emit }) {\n    const onSelectItem = (id) => {\n      emit('select', id)\n    }\n    return {\n      onSelectItem\n    }\n  }\n}\n</script>\n\n<style scoped lang='scss'>\n.user-list-wrap {\n  .item {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 32px;\n\n    &:last-of-type {\n      padding-bottom: 32px;\n    }\n\n    .pic {\n      width: 120px;\n      height: 120px;\n      margin-right: 32px;\n      border-radius: 30px;\n      overflow: hidden;\n      box-shadow: 0px 12px 18px 0px rgba(22, 33, 42, 0.5);\n      flex-shrink: 0;\n      img {\n        height: 100%;\n        width: 100%;\n      }\n    }\n\n    .desc {\n      height: 120px;\n      margin-right: auto;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n\n      h4 {\n        margin: 10px 0;\n\n        &.name {\n          color: $color-light;\n          font-size: $font-size-medium;\n          @include clamp(1);\n          height: 24px;\n        }\n\n        &.singer {\n          color: $color-sub;\n          font-size: $font-size-medium;\n          @include clamp(1);\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./user-list.vue?vue&type=template&id=3c32307a&scoped=true\"\nimport script from \"./user-list.vue?vue&type=script&lang=js\"\nexport * from \"./user-list.vue?vue&type=script&lang=js\"\n\nimport \"./user-list.vue?vue&type=style&index=0&id=3c32307a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/nmy/code/vue3-music/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c32307a\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./singer-list.vue?vue&type=style&index=0&id=c2f63e58&scoped=true&lang=scss\""],"sourceRoot":""}