{"version":3,"sources":["webpack:///./src/components-block/user/user-list.vue?4a50","webpack:///./src/assets/imgs/bg-hot.png","webpack:///./src/views/rank/Rank-detail.vue","webpack:///./src/views/rank/use-detail-cover.js","webpack:///./src/views/rank/Rank-detail.vue?74e5","webpack:///./src/components-block/user/user-list.vue","webpack:///./src/components-block/user/user-list.vue?cedd","webpack:///./src/views/rank/Rank-detail.vue?d187"],"names":["module","exports","class","ref","src","name","appear","detail","coverUrl","bounce","probe-type","onScroll","list","songs","onSelectItem","picEl","navEl","picHeight","navHeight","picRef","navRef","onMounted","value","$el","clientHeight","y","style","transform","val","filter","classList","add","remove","components","SubHeader","UserList","Scroll","setup","route","id","params","onPlayRankToId","__exports__","render","item","key","picUrl","singer","isShowBottomBox","MiniPlayerBox","props","type","Array","default","Boolean","emit"],"mappings":"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","file":"js/chunk-7bcf3042.bf0fe0a4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./user-list.vue?vue&type=style&index=0&id=3c32307a&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/bg-hot.88d83f26.png\";","<template>\n  <transition name='slide' appear>\n    <div class='rank-detail-wrap global-bg'>\n      <sub-header ref='navRef'>{{ detail.name }}</sub-header>\n      <div class='cover-pic' ref='picRef'>\n        <img src='../../assets/imgs/bg-hot.png' v-if='detail.coverUrl'>\n      </div>\n      <scroll class='rank-detail-scroll ' bounce probe-type='3' @scroll='onScroll'>\n        <user-list class='inner container ' :list='detail.songs' @select='onSelectItem'></user-list>\n      </scroll>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router'\nimport { getRankDetailToId } from '@/api'\nimport { ref, watchEffect } from 'vue'\nimport Scroll from '@/components/scroll/scroll'\nimport UserList from '@/components-block/user/user-list'\nimport SubHeader from '@/components/header/sub-header'\nimport usePlayMusic from '@/views/user/use-play-music'\nimport useDetailCover from './use-detail-cover'\n\nexport default {\n  name: 'rank-detail',\n  components: {\n    SubHeader,\n    UserList,\n    Scroll\n  },\n  setup() {\n    const route = useRoute()\n    const detail = ref({})\n    watchEffect(async () => {\n      const id = route.params.id\n      detail.value = await getRankDetailToId(id)\n    })\n    // 点击item\n    const { onPlayRankToId } = usePlayMusic()\n    const onSelectItem = async (id) => {\n      await onPlayRankToId(detail.value.songs, id)\n    }\n    // 滑动动画\n    const {\n      onScroll,\n      picRef,\n      navRef\n    } = useDetailCover()\n    return {\n      detail,\n      onSelectItem,\n      onScroll,\n      picRef,\n      navRef\n    }\n  }\n}\n</script>\n\n<style scoped lang='scss'>\n.rank-detail-wrap {\n  width: 100%;\n  position: fixed;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: 10;\n\n  .sub-header {\n    z-index: 20;\n\n    .fixed {\n      position: fixed;\n      left: -1px;\n      right: 0;\n      height: 88px;\n      z-index: 20;\n      background: #000;\n    }\n  }\n\n  .cover-pic {\n    width: 750px;\n    height: 472px;\n    overflow: hidden;\n    transform-origin: top;\n    &.fixed {\n      position: fixed;\n      left: 0;\n      width: 100%;\n      height: 88px;\n      z-index: 19;\n    }\n\n    img {\n      width: 101%;\n      transform: translate3d(0, 0, 0);\n    }\n  }\n\n  .rank-detail-scroll {\n    width: 100%;\n    position: fixed;\n    left: 0;\n    top: 472px;\n    bottom: 0;\n\n    .inner {\n      padding-top: 16px;\n      background: #2c3840;\n    }\n  }\n}\n</style>\n","import { ref } from 'vue'\nimport { onMounted } from '@vue/runtime-core'\n\nexport default function() {\n  const picRef = ref(null)\n  const navRef = ref(null)\n  let picEl\n  let navEl\n  let picHeight\n  let navHeight\n  onMounted(() => {\n    picEl = picRef.value\n    navEl = navRef.value.$el\n    picHeight = picEl.clientHeight\n    navHeight = navEl.clientHeight\n  })\n  const onScroll = ({ y }) => {\n    // 下拉放大\n    if (y > 0) {\n      picEl.style.transform = `scale(${1 + y / picHeight})`\n    } else {\n      let val = -y / picHeight\n      if (val > 1) {\n        val = 1\n      }\n      picEl.style.filter = `sepia(${val})`\n    }\n    // 判断nav\n    if (y <= -(picHeight - navHeight)) {\n      navEl.classList.add('fixed')\n      picEl.classList.add('fixed')\n    } else {\n      navEl.classList.remove('fixed')\n      picEl.classList.remove('fixed')\n    }\n  }\n  return {\n    picRef,\n    navRef,\n    onScroll\n  }\n}\n","import { render } from \"./Rank-detail.vue?vue&type=template&id=e623fc0a&scoped=true\"\nimport script from \"./Rank-detail.vue?vue&type=script&lang=js\"\nexport * from \"./Rank-detail.vue?vue&type=script&lang=js\"\n\nimport \"./Rank-detail.vue?vue&type=style&index=0&id=e623fc0a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/nmy/code/vue3-music/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e623fc0a\"]])\n\nexport default __exports__","<template>\n  <ul class='user-list-wrap'>\n    <li class='item' v-for='item in list' :key='item' @click='onSelectItem(item.id)'>\n      <div class='pic'>\n        <img v-if='item.picUrl' v-lazy='item.picUrl'>\n      </div>\n      <div class='desc'>\n        <h4 class='name'>{{ item.name }}</h4>\n        <h4 class='singer'>{{ item.singer }}</h4>\n      </div>\n    </li>\n    <mini-player-box v-if='isShowBottomBox'></mini-player-box>\n  </ul>\n</template>\n\n<script>\n\nimport MiniPlayerBox from '@/components/mini-player-box/mini-player-box'\n\nexport default {\n  name: 'user-list',\n  components: { MiniPlayerBox },\n  props: {\n    list: {\n      type: Array,\n      default: () => ([])\n    },\n    isShowBottomBox: {\n      type: Boolean,\n      default: true\n    }\n  },\n  setup(props, { emit }) {\n    const onSelectItem = (id) => {\n      emit('select', id)\n    }\n    return {\n      onSelectItem\n    }\n  }\n}\n</script>\n\n<style scoped lang='scss'>\n.user-list-wrap {\n  .item {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 32px;\n\n    &:last-of-type {\n      padding-bottom: 32px;\n    }\n\n    .pic {\n      width: 120px;\n      height: 120px;\n      margin-right: 32px;\n      border-radius: 30px;\n      overflow: hidden;\n      box-shadow: 0px 12px 18px 0px rgba(22, 33, 42, 0.5);\n      flex-shrink: 0;\n      img {\n        height: 100%;\n        width: 100%;\n      }\n    }\n\n    .desc {\n      height: 120px;\n      margin-right: auto;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n\n      h4 {\n        margin: 10px 0;\n\n        &.name {\n          color: $color-light;\n          font-size: $font-size-medium;\n          @include clamp(1);\n          height: 24px;\n        }\n\n        &.singer {\n          color: $color-sub;\n          font-size: $font-size-medium;\n          @include clamp(1);\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render } from \"./user-list.vue?vue&type=template&id=3c32307a&scoped=true\"\nimport script from \"./user-list.vue?vue&type=script&lang=js\"\nexport * from \"./user-list.vue?vue&type=script&lang=js\"\n\nimport \"./user-list.vue?vue&type=style&index=0&id=3c32307a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/nmy/code/vue3-music/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3c32307a\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Rank-detail.vue?vue&type=style&index=0&id=e623fc0a&scoped=true&lang=scss\""],"sourceRoot":""}